<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cup Cafe Menu</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container my-4">
  <h1 class="text-center mb-4">â˜• Cup Cafe Menu</h1>

  <!-- Main Categories -->
  <div class="row text-center mb-4" id="menuItems"></div>

  <!-- Submenu Display -->
  <div id="subMenu" class="card d-none mb-4">
    <div class="card-body">
      <h5 class="card-title" id="subMenuTitle"></h5>
      <div class="row" id="subMenuItems"></div>
    </div>
  </div>

  <!-- Customization -->
  <div id="customization" class="card d-none mb-4">
    <div class="card-body">
      <h5 class="card-title">Customize Your Drink</h5>
      <p class="card-subtitle mb-3 text-muted" id="selectedDrink"></p>

      <div class="mb-3">
        <label for="beansSelect" class="form-label">Bean Type</label>
        <select class="form-select" id="beansSelect"></select>
        <small class="text-muted" id="beanNote"></small>
      </div>

      <div class="mb-3">
        <label for="milkSelect" class="form-label">Milk Type</label>
        <select class="form-select" id="milkSelect"></select>
        <small class="text-muted" id="milkNote"></small>
      </div>

      <div class="mb-3">
        <label for="sizeSelect" class="form-label">Size</label>
        <select class="form-select" id="sizeSelect">
          <option value="Tall">Tall</option>
          <option value="Grande">Grande</option>
        </select>
      </div>

      <button class="btn btn-warning" onclick="addToOrder()">Add to Order</button>
    </div>
  </div>

  <!-- Order Summary -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">ðŸ§¾ Your Order</h5>
      <ul class="list-group" id="orderList"></ul>
    </div>
  </div>
</div>

<script>
  let menuData = [];
  let selectedCategory = null;
  let selectedDrink = null;
  const orders = [];

  const beansOptions = [
    { name: "Brazil", note: "Smooth and nutty with low acidity." },
    { name: "Columbia", note: "Balanced flavor with a hint of sweetness." },
    { name: "Ethiopia", note: "Fruity and floral notes with bright acidity." }
  ];

  const milkOptions = [
    { name: "Fullfat Milk", note: "Rich and creamy texture." },
    { name: "Lowfat Milk", note: "Lighter option with less fat." },
    { name: "Soy Milk", note: "High in protein and supports heart health." },
    { name: "Almond Milk", note: "Rich in vitamin E and low in calories." },
    { name: "Skim Milk", note: "Fat-free and high in calcium." },
    { name: "Oats Milk", note: "Naturally sweet and high in fiber." },
    { name: "Coconut Milk", note: "Contains MCTs that may aid metabolism." }
  ];

  async function loadMenuData() {
    try {
      const res = await fetch("menuData.json");
      menuData = await res.json();
      populateMenu();
    } catch (err) {
      console.error("Error loading menu data:", err);
    }
  }

  function populateMenu() {
    const container = document.getElementById('menuItems');
    container.innerHTML = '';
    menuData.forEach(item => {
      const col = document.createElement('div');
      col.className = 'col-4 col-md-2 mb-3';
      col.innerHTML = `
        <button class="btn btn-light w-100" onclick="showSubMenu('${item.name}')">
          <img src="${item.image}" class="img-fluid mb-1" alt="${item.name}" />
          <div class="small">${item.name}</div>
        </button>
      `;
      container.appendChild(col);
    });
  }

  function showSubMenu(categoryName) {
    selectedCategory = categoryName;
    const category = menuData.find(m => m.name === categoryName);
    const subMenuContainer = document.getElementById('subMenu');
    const subMenuItems = document.getElementById('subMenuItems');
    const subMenuTitle = document.getElementById('subMenuTitle');

    subMenuContainer.classList.remove('d-none');
    subMenuItems.innerHTML = '';
    subMenuTitle.textContent = `Choose a drink from ${categoryName}`;

    category.subItems.forEach(sub => {
      const col = document.createElement('div');
      col.className = 'col-6 col-md-3 mb-2';
      col.innerHTML = `
        <button class="btn btn-outline-primary w-100 small" onclick="showCustomization('${sub}')">${sub}</button>
      `;
      subMenuItems.appendChild(col);
    });

    document.getElementById('customization').classList.add('d-none');
  }

  function showCustomization(drinkName) {
    selectedDrink = drinkName;
    document.getElementById('customization').classList.remove('d-none');
    document.getElementById('selectedDrink').textContent = `Selected: ${selectedDrink} from ${selectedCategory}`;
    
    populateSelect('beansSelect', beansOptions, 'beanNote');
    populateSelect('milkSelect', milkOptions, 'milkNote');
  }

  function populateSelect(selectId, options, noteId) {
    const select = document.getElementById(selectId);
    select.innerHTML = '';
    options.forEach(opt => {
      const option = document.createElement('option');
      option.value = opt.name;
      option.textContent = opt.name;
      select.appendChild(option);
    });

    const note = document.getElementById(noteId);
    note.textContent = options[0].note;

    select.addEventListener('change', (e) => {
      const selected = options.find(o => o.name === e.target.value);
      note.textContent = selected.note;
    });
  }

  function addToOrder() {
    const bean = document.getElementById('beansSelect').value;
    const milk = document.getElementById('milkSelect').value;
    const size = document.getElementById('sizeSelect').value;

    const orderItem = `${size} ${selectedDrink} - ${bean}, ${milk}`;
    orders.push(orderItem);
    updateOrderList();

    alert(`Added: ${orderItem}`);
  }

  function updateOrderList() {
    const list = document.getElementById('orderList');
    list.innerHTML = '';
    orders.forEach((item, index) => {
      const li = document.createElement('li');
      li.className = 'list-group-item';
      li.textContent = `${index + 1}. ${item}`;
      list.appendChild(li);
    });
  }

  window.onload = loadMenuData;
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
